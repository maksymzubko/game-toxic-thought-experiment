import{r as g,_ as d,h as T,a as Y,m as P,j as i,c as w,B as y}from"./Box-530d5a90.js";import{i as ee,j as re,l as te,s as Q,k as pe,q as E,p as _e,t as k,C as se}from"./index-048aef57.js";import{B as I,a as me,b as fe,c as ve,S as xe}from"./selector-c73c46b6.js";import{c as Pe,u as Oe,d as Re,e as oe,f as ae}from"./notistack.esm-ac58ab28.js";import{a as Se,A as ne,g as he,b as Ne}from"./animalHelp-37f73dfd.js";import{B as ie}from"./Backdrop-d9d0f506.js";const Ce=e=>{const r=g.useRef({});return g.useEffect(()=>{r.current=e}),r.current},be=Ce;function ye(e){return typeof e=="string"}function $e(e,r,n){return e===void 0||ye(e)?r:d({},r,{ownerState:d({},r.ownerState,n)})}function we(e,r=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!r.includes(s)).forEach(s=>{n[s]=e[s]}),n}function Ae(e,r){return typeof e=="function"?e(r):e}function le(e){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{r[n]=e[n]}),r}function Be(e){const{getSlotProps:r,additionalProps:n,externalSlotProps:s,externalForwardedProps:a,className:t}=e;if(!r){const O=T(a==null?void 0:a.className,s==null?void 0:s.className,t,n==null?void 0:n.className),b=d({},n==null?void 0:n.style,a==null?void 0:a.style,s==null?void 0:s.style),v=d({},n,a,s);return O.length>0&&(v.className=O),Object.keys(b).length>0&&(v.style=b),{props:v,internalRef:void 0}}const c=we(d({},a,s)),p=le(s),h=le(a),u=r(c),m=T(u==null?void 0:u.className,n==null?void 0:n.className,t,a==null?void 0:a.className,s==null?void 0:s.className),l=d({},u==null?void 0:u.style,n==null?void 0:n.style,a==null?void 0:a.style,s==null?void 0:s.style),S=d({},u,n,h,p);return m.length>0&&(S.className=m),Object.keys(l).length>0&&(S.style=l),{props:S,internalRef:u.ref}}const Le=["elementType","externalSlotProps","ownerState"];function ce(e){var r;const{elementType:n,externalSlotProps:s,ownerState:a}=e,t=Y(e,Le),c=Ae(s,a),{props:p,internalRef:h}=Be(d({},t,{externalSlotProps:c})),u=Pe(h,c==null?void 0:c.ref,(r=e.additionalProps)==null?void 0:r.ref);return $e(n,d({},p,{ref:u}),a)}function Ge(e){const{badgeContent:r,invisible:n=!1,max:s=99,showZero:a=!1}=e,t=be({badgeContent:r,max:s});let c=n;n===!1&&r===0&&!a&&(c=!0);const{badgeContent:p,max:h=s}=c?t:e,u=p&&Number(p)>h?`${h}+`:p;return{badgeContent:p,invisible:c,max:h,displayValue:u}}function qe(e){return ee("MuiBadge",e)}re("MuiBadge",["root","badge","invisible"]);const ze=["badgeContent","component","children","invisible","max","slotProps","slots","showZero"],Ee=e=>{const{invisible:r}=e;return te({root:["root"],badge:["badge",r&&"invisible"]},qe,void 0)},Te=g.forwardRef(function(r,n){const{component:s,children:a,max:t=99,slotProps:c={},slots:p={},showZero:h=!1}=r,u=Y(r,ze),{badgeContent:m,max:l,displayValue:S,invisible:O}=Ge(d({},r,{max:t})),b=d({},r,{badgeContent:m,invisible:O,max:l,showZero:h}),v=Ee(b),R=s||p.root||"span",N=ce({elementType:R,externalSlotProps:c.root,externalForwardedProps:u,additionalProps:{ref:n},ownerState:b,className:v.root}),_=p.badge||"span",x=ce({elementType:_,externalSlotProps:c.badge,ownerState:b,className:v.badge});return P(R,d({},N,{children:[a,i(_,d({},x,{children:S}))]}))}),Ue=Te;function Me(e){return ee("MuiAvatarGroup",e)}const Ie=re("MuiAvatarGroup",["root","avatar"]),We=Ie,De=["children","className","component","componentsProps","max","slotProps","spacing","total","variant"],ue={small:-16,medium:null},Ze=e=>{const{classes:r}=e;return te({root:["root"],avatar:["avatar"]},Me,r)},je=Q("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,r)=>d({[`& .${We.avatar}`]:r.avatar},r.root)})(({theme:e})=>({[`& .${Se.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"})),Fe=Q(ne,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})(({theme:e})=>({border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})),He=g.forwardRef(function(r,n){var s;const a=pe({props:r,name:"MuiAvatarGroup"}),{children:t,className:c,component:p="div",componentsProps:h={},max:u=5,slotProps:m={},spacing:l="medium",total:S,variant:O="circular"}=a,b=Y(a,De);let v=u<2?2:u;const R=d({},a,{max:u,spacing:l,component:p,variant:O}),N=Ze(R),_=g.Children.toArray(t).filter(B=>g.isValidElement(B)),x=S||_.length;x===v&&(v+=1),v=Math.min(x+1,v);const A=Math.min(_.length,v-1),L=Math.max(x-v,x-A,0),q=l&&ue[l]!==void 0?ue[l]:-l,C=(s=m.additionalAvatar)!=null?s:h.additionalAvatar;return P(je,d({as:p,ownerState:R,className:T(N.root,c),ref:n},b,{children:[L?P(Fe,d({ownerState:R,variant:O},C,{className:T(N.avatar,C==null?void 0:C.className),style:d({marginLeft:q},C==null?void 0:C.style),children:["+",L]})):null,_.slice(0,A).reverse().map((B,W)=>g.cloneElement(B,{className:T(B.props.className,N.avatar),style:d({marginLeft:W===A-1?void 0:q},B.props.style),variant:B.props.variant||O}))]}))}),Ve=He,ke=e=>!e||!ye(e),de=ke;function Ye(e){return ee("MuiBadge",e)}const Qe=re("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),G=Qe,Je=["anchorOrigin","className","component","components","componentsProps","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],K=10,X=4,Ke=e=>{const{color:r,anchorOrigin:n,invisible:s,overlap:a,variant:t,classes:c={}}=e,p={root:["root"],badge:["badge",t,s&&"invisible",`anchorOrigin${w(n.vertical)}${w(n.horizontal)}`,`anchorOrigin${w(n.vertical)}${w(n.horizontal)}${w(a)}`,`overlap${w(a)}`,r!=="default"&&`color${w(r)}`]};return te(p,Ye,c)},Xe=Q("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,r)=>r.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),er=Q("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.badge,r[n.variant],r[`anchorOrigin${w(n.anchorOrigin.vertical)}${w(n.anchorOrigin.horizontal)}${w(n.overlap)}`],n.color!=="default"&&r[`color${w(n.color)}`],n.invisible&&r.invisible]}})(({theme:e,ownerState:r})=>d({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:K*2,lineHeight:1,padding:"0 6px",height:K*2,borderRadius:K,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},r.color!=="default"&&{backgroundColor:(e.vars||e).palette[r.color].main,color:(e.vars||e).palette[r.color].contrastText},r.variant==="dot"&&{borderRadius:X,height:X*2,minWidth:X*2,padding:0},r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${G.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${G.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${G.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${G.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${G.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${G.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${G.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${G.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},r.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),rr=g.forwardRef(function(r,n){var s,a,t,c,p,h;const u=pe({props:r,name:"MuiBadge"}),{anchorOrigin:m={vertical:"top",horizontal:"right"},className:l,component:S="span",components:O={},componentsProps:b={},overlap:v="rectangular",color:R="default",invisible:N=!1,max:_,badgeContent:x,slots:A,slotProps:L,showZero:q=!1,variant:C="standard"}=u,B=Y(u,Je),W=be({anchorOrigin:m,color:R,overlap:v,variant:C});let D=N;N===!1&&(x===0&&!q||x==null&&C!=="dot")&&(D=!0);const{color:U=R,overlap:Z=v,anchorOrigin:z=m,variant:M=C}=D?W:u,J=d({},u,{anchorOrigin:z,invisible:D,color:U,overlap:Z,variant:M}),o=Ke(J);let $;M!=="dot"&&($=x&&Number(x)>_?`${_}+`:x);const j=(s=(a=A==null?void 0:A.root)!=null?a:O.Root)!=null?s:Xe,F=(t=(c=A==null?void 0:A.badge)!=null?c:O.Badge)!=null?t:er,H=(p=L==null?void 0:L.root)!=null?p:b.root,V=(h=L==null?void 0:L.badge)!=null?h:b.badge;return i(Ue,d({invisible:N,badgeContent:$,showZero:q,max:_},B,{slots:{root:j,badge:F},className:T(H==null?void 0:H.className,o.root,l),slotProps:{root:d({},H,de(j)&&{as:S,ownerState:d({},H==null?void 0:H.ownerState,{anchorOrigin:z,color:U,overlap:Z,variant:M})}),badge:d({},V,{className:T(o.badge,V==null?void 0:V.className)},de(F)&&{ownerState:d({},V==null?void 0:V.ownerState,{anchorOrigin:z,color:U,overlap:Z,variant:M})})},ref:n}))}),ge=rr,tr="_container_10ex7_1",nr="_players_list_avatars_10ex7_35",sr="_players_list_10ex7_35",or="_current_10ex7_67",ar="_pulse_10ex7_1",ir="_question_10ex7_75",lr="_answers_10ex7_75",cr="_content_10ex7_103",ur="_waiting_10ex7_155",dr="_result_buttons_10ex7_163",gr="_correct_10ex7_181",pr="_incorrect_10ex7_191",mr="_results_10ex7_201",fr="_round_10ex7_209",vr="_timer_10ex7_223",f={container:tr,players_list_avatars:nr,players_list:sr,current:or,pulse:ar,question:ir,answers:lr,content:cr,waiting:ur,result_buttons:dr,correct:gr,incorrect:pr,results:mr,round:fr,timer:vr},hr=e=>{const r=n=>e.multiplayer||n===e.currentStep?f.current:"";return P(y,{style:{width:"100%"},children:[P(y,{className:f.players_list,children:[i("h1",{children:"players: "}),i(y,{className:f.players_list_avatars,children:e.players.map(n=>i(ne,{className:r(n.letter),src:he(n.letter),alt:"animal"+n.letter}))})]}),P(y,{className:f.question,children:[i("h1",{children:"question:"}),i(y,{className:f.content,children:e.question.question})]}),!e.isAnswered&&P(y,{className:f.answers,children:[i("h1",{children:"answers:"}),P(y,{className:f.content,children:[e.question.answers.map((n,s)=>i(I,{onClick:()=>e.handleAnswer(s),children:n})),i(I,{onClick:e.handleSkip,children:"skip (drink)"})]})]}),e.isAnswered&&i("h1",{className:f.waiting,children:"Waiting while other players answering.."}),i(y,{className:f.timer,children:e.timer})]})},br=e=>{const r=E(me),n=E(fe),s=E(ve),[a,t]=g.useState(-1);g.useEffect(()=>{t(e.result.correct)},[e.result]);const c=()=>{if(s.single){const m=e.result.results.filter(l=>!l.answer.isCorrect);return m.length?m.map(l=>Ne(l.player??"")).join(", ")+" drinking!":"Nobody drinking :("}else return e.result.results.filter(m=>m.player===n)[0].answer.isCorrect?"You not drinking!":"You drinking!"},p=()=>{r==null||r.emit("startGame")},h=()=>{r==null||r.emit("leaveRoom")},u=m=>i(Ve,{max:3,children:e.result.results.filter(l=>l.answer.variant===m).map(l=>i(ne,{src:he(l.player??""),alt:"animal-img"}))});return e.result.results.length>0?P(y,{className:f.results,children:[i(y,{className:f.players_list,children:i(y,{className:f.answers,children:P(y,{className:f.content,children:[e.question.answers.map((m,l)=>i(ge,{style:{width:"100%"},badgeContent:u(l),children:i(I,{className:a===l?f.correct:f.incorrect,children:m})})),i(ge,{style:{width:"100%"},badgeContent:u(-1),children:i(I,{className:a===-1?f.correct:f.incorrect,children:"skip (drink)"})})]})})}),i("h1",{children:c()}),P(y,{className:f.result_buttons,children:[s.isOwner&&i(I,{onClick:p,children:"continue"}),i(I,{onClick:h,children:"leave"})]})]}):i(y,{})},Sr=()=>{const e=_e(),r=Oe(),n=E(xe),s=E(fe),a=E(ve),t=E(me),{enqueueSnackbar:c,closeSnackbar:p}=Re(),[h,u]=g.useState(!0),[m,l]=g.useState(!1),[S,O]=g.useState([]),[b,v]=g.useState("waiting"),[R,N]=g.useState({question:"",answers:[]}),[_,x]=g.useState(-1),[A,L]=g.useState(60),[q,C]=g.useState(1),[B,W]=g.useState({correct:0,results:[]}),[D,U]=g.useState(""),[Z,z]=g.useState(!1);g.useEffect(()=>{if(_===3){let o=setInterval(()=>{x($=>($===-1&&(clearInterval(o),t==null||t.emit("startGame")),$-1))},1e3)}},[_]),g.useEffect(()=>(!n||!s&&!a.single&&b!=="results"?(c(`Error when tried connect to ${n?"Room":"WebSocket"}`,{variant:"error"}),e(k.start)):u(!1),t==null||t.emit("getRoomInfo"),t==null||t.once("getRoom",o=>{o.status?(O(o.playersList),u(!0),a.isOwner&&x(3)):(c("Error when tried connect to Room",{variant:"error"}),e(k.start))}),t==null||t.on("leavedRoom",o=>{o.status&&(b==="waiting"?e(k.room):b==="running"?(r(oe({roomNumber:null,single:null,isOwner:null})),r(ae({user_letter:null})),c("One player leaves from a game before it gone",{variant:"info"}),t==null||t.emit("leaveRoom")):(r(oe({roomNumber:null,single:null,isOwner:null})),r(ae({user_letter:null})),e(k.lobby)))}),t==null||t.on("gameStarted",o=>{var $,j,F;u(!1),o.status?(z(!1),N(($=o==null?void 0:o.data)==null?void 0:$.question),C((j=o==null?void 0:o.data)==null?void 0:j.round),U(((F=o==null?void 0:o.data)==null?void 0:F.step)??""),v("running")):c(o.message,{variant:"error"})}),t==null||t.on("gameEnded",o=>{l(!1),o.status&&(W({correct:o.correct,results:o.results}),v("results"))}),t==null||t.on("time",o=>{o.status&&L(o.data.time)}),t==null||t.on("answer",o=>{var $;l(!1),o.status?a.single?U((($=o==null?void 0:o.data)==null?void 0:$.step)??""):z(!0):c("Failed to send your answer. Try again.",{variant:"error"})}),()=>{t==null||t.off("time"),t==null||t.off("gameEnded"),t==null||t.off("answer"),t==null||t.off("gameStarted"),t==null||t.off("leavedRoom")}),[]);const M=()=>{l(!0),t==null||t.emit("skip-question"),t==null||t.once("skip-question",o=>{l(!1),o.status?z(!0):c("Failed skip. Try again.",{variant:"error"})})},J=o=>{l(!0),t==null||t.emit("answer",{answer:o})};return P(y,{className:f.container,children:[P(y,{className:f.round,children:["Round: ",q]}),i(ie,{open:h,style:{color:"black"},children:_<0?P("h1",{children:["Waiting... ",i(se,{})]}):i("h1",{children:_})}),i(ie,{open:m,style:{color:"black"},children:P("h1",{children:["Sending request.. ",i(se,{})]})}),b==="running"&&i(hr,{players:S,question:R,currentStep:D,handleAnswer:J,handleSkip:M,isAnswered:Z,multiplayer:!a.single,timer:A}),b==="results"&&i(br,{result:B,question:R})]})};export{Sr as default};
